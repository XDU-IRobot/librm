"use strict";(self.webpackChunklibrm_docs=self.webpackChunklibrm_docs||[]).push([[917],{6753:(n,l,e)=>{e.r(l),e.d(l,{assets:()=>s,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"tutorials/float16","title":"Float16 \u6d6e\u70b9\u6570\u8f6c\u6362","description":"\u672c\u4f8b\u7a0b\u6f14\u793a\u5982\u4f55\u4f7f\u7528 librm \u4e2d\u7684 Float16 \u529f\u80fd\u8fdb\u884c\u534a\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08FP16\uff09\u548c\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08FP32\uff09\u4e4b\u95f4\u7684\u8f6c\u6362\u3002","source":"@site/docs/tutorials/float16.mdx","sourceDirName":"tutorials","slug":"/tutorials/float16","permalink":"/tutorials/float16","draft":false,"unlisted":false,"editUrl":"https://github.com/XDU-IRobot/librm/tree/main/docs/docs/tutorials/float16.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u8bbe\u5907\u72b6\u6001\u76d1\u63a7","permalink":"/tutorials/device-status-monitor"},"next":{"title":"\u59ff\u6001\u89e3\u7b97","permalink":"/tutorials/imu-fusion"}}');var r=e(4848),t=e(8453);const i={},a="Float16 \u6d6e\u70b9\u6570\u8f6c\u6362",s={},d=[{value:"\u57fa\u7840\u6982\u5ff5",id:"\u57fa\u7840\u6982\u5ff5",level:2},{value:"Float32 \u8f6c Float16",id:"float32-\u8f6c-float16",level:2},{value:"Float16 \u8f6c Float32",id:"float16-\u8f6c-float32",level:2},{value:"\u7279\u6b8a\u503c\u5904\u7406",id:"\u7279\u6b8a\u503c\u5904\u7406",level:2},{value:"\u7cbe\u5ea6\u635f\u5931",id:"\u7cbe\u5ea6\u635f\u5931",level:2}];function c(n){const l={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.header,{children:(0,r.jsx)(l.h1,{id:"float16-\u6d6e\u70b9\u6570\u8f6c\u6362",children:"Float16 \u6d6e\u70b9\u6570\u8f6c\u6362"})}),"\n",(0,r.jsx)(l.p,{children:"\u672c\u4f8b\u7a0b\u6f14\u793a\u5982\u4f55\u4f7f\u7528 librm \u4e2d\u7684 Float16 \u529f\u80fd\u8fdb\u884c\u534a\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08FP16\uff09\u548c\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff08FP32\uff09\u4e4b\u95f4\u7684\u8f6c\u6362\u3002"}),"\n",(0,r.jsx)(l.p,{children:"Float16 \u4f7f\u7528 16 \u4f4d\u5b58\u50a8\uff0c\u76f8\u6bd4 Float32 \u53ef\u4ee5\u8282\u7701 50% \u7684\u5b58\u50a8\u7a7a\u95f4\u548c\u4f20\u8f93\u5e26\u5bbd\uff0c\u4e14\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u7cbe\u5ea6\u635f\u5931\u76f8\u8f83\u4e8e\u6620\u5c04\u5230 uint16 \u7684\u6574\u4e2a\u8303\u56f4\uff080~65535\uff09\u8981\u5c0f\u3002"}),"\n",(0,r.jsx)(l.p,{children:"FP16 \u5728\u548c\u4e0a\u4f4d\u673a\u901a\u4fe1\u7684\u65f6\u5019\u975e\u5e38\u6709\u7528\uff0c\u6bd4\u5982\u4e00\u4e2a\u59ff\u6001\u56db\u5143\u6570\u662f 4 \u4e2a fp32\uff0c\u8f6c\u6362\u6210 fp16 \u540e\u53ea\u9700\u8981 8 \u4e2a\u5b57\u8282\uff0c\u53ef\u4ee5\u653e\u5728\u4e00\u4e2a CAN \u5e27\u91cc\u4f20\u8f93\u5b8c\u3002"}),"\n",(0,r.jsx)(l.h2,{id:"\u57fa\u7840\u6982\u5ff5",children:"\u57fa\u7840\u6982\u5ff5"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.strong,{children:"Float16 (FP16)"}),"\uff1a16 \u4f4d\u534a\u7cbe\u5ea6\u6d6e\u70b9\u6570"]}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:"\u7b26\u53f7\u4f4d\uff1a1 \u4f4d"}),"\n",(0,r.jsx)(l.li,{children:"\u6307\u6570\u4f4d\uff1a5 \u4f4d\uff08\u504f\u79fb\u91cf 15\uff09"}),"\n",(0,r.jsx)(l.li,{children:"\u5c3e\u6570\u4f4d\uff1a10 \u4f4d"}),"\n",(0,r.jsx)(l.li,{children:"\u8868\u793a\u8303\u56f4\uff1a\u7ea6 \xb16.55\xd710\u2074"}),"\n",(0,r.jsx)(l.li,{children:"\u7cbe\u5ea6\uff1a\u7ea6 3-4 \u4f4d\u6709\u6548\u6570\u5b57"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.strong,{children:"Float32 (FP32)"}),"\uff1a32 \u4f4d\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570"]}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:"\u7b26\u53f7\u4f4d\uff1a1 \u4f4d"}),"\n",(0,r.jsx)(l.li,{children:"\u6307\u6570\u4f4d\uff1a8 \u4f4d\uff08\u504f\u79fb\u91cf 127\uff09"}),"\n",(0,r.jsx)(l.li,{children:"\u5c3e\u6570\u4f4d\uff1a23 \u4f4d"}),"\n",(0,r.jsx)(l.li,{children:"\u8868\u793a\u8303\u56f4\uff1a\u7ea6 \xb13.4\xd710\xb3\u2078"}),"\n",(0,r.jsx)(l.li,{children:"\u7cbe\u5ea6\uff1a\u7ea6 6-7 \u4f4d\u6709\u6548\u6570\u5b57"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"float32-\u8f6c-float16",children:"Float32 \u8f6c Float16"}),"\n",(0,r.jsx)(l.p,{children:"\u5c06\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u538b\u7f29\u4e3a\u534a\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff0c\u7528\u4e8e\u8282\u7701\u5b58\u50a8\u6216\u4f20\u8f93\u5e26\u5bbd\u3002"}),"\n",(0,r.jsx)(l.pre,{children:(0,r.jsx)(l.code,{className:"language-cpp",children:"#include <librm.hpp>\n\nint main() {\n  float value = 3.14159f;\n\n  // \u8f6c\u6362\u4e3a Float16\n  rm::modules::f16 half_value = rm::modules::F32ToF16(value);\n\n  // \u73b0\u5728\u53ef\u4ee5\u5b58\u50a8\u6216\u4f20\u8f93 half_value\uff08\u4ec5\u5360 2 \u5b57\u8282\uff09\n  return 0;\n}\n"})}),"\n",(0,r.jsx)(l.h2,{id:"float16-\u8f6c-float32",children:"Float16 \u8f6c Float32"}),"\n",(0,r.jsx)(l.p,{children:"\u5c06\u534a\u7cbe\u5ea6\u6d6e\u70b9\u6570\u89e3\u538b\u4e3a\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff0c\u7528\u4e8e\u8ba1\u7b97\u3002"}),"\n",(0,r.jsx)(l.pre,{children:(0,r.jsx)(l.code,{className:"language-cpp",children:"#include <librm.hpp>\n\nint main() {\n  rm::modules::f16 half_value = 0x4248;  // Float16 \u8868\u793a\u7684 3.14...\n\n  // \u8f6c\u6362\u4e3a Float32\n  float value = rm::modules::F16ToF32(half_value);\n\n  // \u73b0\u5728\u53ef\u4ee5\u7528 value \u8fdb\u884c\u6b63\u5e38\u7684\u6d6e\u70b9\u8fd0\u7b97\n  float result = value * 2.0f;\n\n  return 0;\n}\n"})}),"\n",(0,r.jsx)(l.h2,{id:"\u7279\u6b8a\u503c\u5904\u7406",children:"\u7279\u6b8a\u503c\u5904\u7406"}),"\n",(0,r.jsx)(l.p,{children:"Float16 \u652f\u6301 IEEE 754 \u6807\u51c6\u7684\u7279\u6b8a\u503c\u3002"}),"\n",(0,r.jsx)(l.pre,{children:(0,r.jsx)(l.code,{className:"language-cpp",children:"#include <librm.hpp>\n#include <cmath>\n\nint main() {\n  // \u6b63\u65e0\u7a77\n  float inf = INFINITY;\n  rm::modules::f16 h_inf = rm::modules::F32ToF16(inf);\n  float inf_back = rm::modules::F16ToF32(h_inf);  // \u4ecd\u662f INFINITY\n\n  // \u8d1f\u65e0\u7a77\n  float neg_inf = -INFINITY;\n  rm::modules::f16 h_neg_inf = rm::modules::F32ToF16(neg_inf);\n\n  // NaN\uff08\u975e\u6570\u5b57\uff09\n  float nan = NAN;\n  rm::modules::f16 h_nan = rm::modules::F32ToF16(nan);\n\n  // \u96f6\u503c\uff08\u6b63\u96f6\u548c\u8d1f\u96f6\uff09\n  float zero = 0.0f;\n  float neg_zero = -0.0f;\n  rm::modules::f16 h_zero = rm::modules::F32ToF16(zero);\n  rm::modules::f16 h_neg_zero = rm::modules::F32ToF16(neg_zero);\n\n  return 0;\n}\n"})}),"\n",(0,r.jsx)(l.h2,{id:"\u7cbe\u5ea6\u635f\u5931",children:"\u7cbe\u5ea6\u635f\u5931"}),"\n",(0,r.jsx)(l.p,{children:"Float16 \u7684\u7cbe\u5ea6\u548c\u8303\u56f4\u6bd4 Float32 \u5c0f\uff0c\u8f6c\u6362\u65f6\u9700\u8981\u6ce8\u610f\u3002"}),"\n",(0,r.jsx)(l.pre,{children:(0,r.jsx)(l.code,{className:"language-cpp",children:'#include <librm.hpp>\n#include <cstdio>\n\nint main() {\n  // \u7cbe\u5ea6\u635f\u5931\u793a\u4f8b\n  float original = 3.1415926f;  // 7 \u4f4d\u7cbe\u5ea6\n  rm::modules::f16 half = rm::modules::F32ToF16(original);\n  float restored = rm::modules::F16ToF32(half);  // \u7ea6 3.141\uff083-4 \u4f4d\u7cbe\u5ea6\uff09\n\n  printf("Original: %.7f\\n", original);\n  printf("Restored: %.7f\\n", restored);\n  printf("Error: %.7f\\n", original - restored);\n\n  // \u8d85\u51fa\u8303\u56f4\uff1a\u81ea\u52a8\u53d8\u4e3a\u65e0\u7a77\n  float huge = 1e10f;  // \u8fdc\u8d85 Float16 \u8303\u56f4\n  rm::modules::f16 h_huge = rm::modules::F32ToF16(huge);\n  float back = rm::modules::F16ToF32(h_huge);  // \u53d8\u4e3a INFINITY\n\n  // \u6b21\u6b63\u89c4\u6570\uff08subnormal\uff09\n  float tiny = 1e-10f;\n  rm::modules::f16 h_tiny = rm::modules::F32ToF16(tiny);\n  // \u53ef\u80fd\u53d8\u4e3a 0 \u6216\u6b21\u6b63\u89c4\u6570\n\n  return 0;\n}\n'})})]})}function u(n={}){const{wrapper:l}={...(0,t.R)(),...n.components};return l?(0,r.jsx)(l,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}},8453:(n,l,e)=>{e.d(l,{R:()=>i,x:()=>a});var o=e(6540);const r={},t=o.createContext(r);function i(n){const l=o.useContext(t);return o.useMemo((function(){return"function"==typeof n?n(l):{...l,...n}}),[l,n])}function a(n){let l;return l=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),o.createElement(t.Provider,{value:l},n.children)}}}]);